<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>魔兽世界中的宏与脚本 | 熊战天下 | 生而无畏，方可战天下</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="魔兽世界,游戏,脚本,宏,外挂,外挂开发,Lua">
    <meta name="description" content="相关资源链接： 魔兽世界WIKI http://www.wowwiki.com/\魔兽世界宏脚本 http://wowwiki.wikia.com/wiki/MACRO_script\一些宏 http://wowwiki.wikia.com/wiki/Most_used_macros\ 宏与脚本什么是宏宏本来是一个编程术语，暴雪在 WOW 中定义的宏，是一系列命令组合在一起以完成某些特定的操作，也">
<meta name="keywords" content="魔兽世界,游戏,脚本,宏,外挂,外挂开发,Lua">
<meta property="og:type" content="article">
<meta property="og:title" content="魔兽世界中的宏与脚本">
<meta property="og:url" content="http://denisding.github.io/2018/01/16/wow-macro-and-script/index.html">
<meta property="og:site_name" content="熊战天下">
<meta property="og:description" content="相关资源链接： 魔兽世界WIKI http://www.wowwiki.com/\魔兽世界宏脚本 http://wowwiki.wikia.com/wiki/MACRO_script\一些宏 http://wowwiki.wikia.com/wiki/Most_used_macros\ 宏与脚本什么是宏宏本来是一个编程术语，暴雪在 WOW 中定义的宏，是一系列命令组合在一起以完成某些特定的操作，也">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-01-18T06:03:36.801Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="魔兽世界中的宏与脚本">
<meta name="twitter:description" content="相关资源链接： 魔兽世界WIKI http://www.wowwiki.com/\魔兽世界宏脚本 http://wowwiki.wikia.com/wiki/MACRO_script\一些宏 http://wowwiki.wikia.com/wiki/Most_used_macros\ 宏与脚本什么是宏宏本来是一个编程术语，暴雪在 WOW 中定义的宏，是一系列命令组合在一起以完成某些特定的操作，也">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.png)">
      <div class="brand">
        <a href="/about" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">丁竹</h5>
          <a href="mailto:yyguangzheng@163.com" title="yyguangzheng@163.com" class="mail">yyguangzheng@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                日志
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-link"></i>
                关于
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/denisding" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">魔兽世界中的宏与脚本</div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">魔兽世界中的宏与脚本</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-01-16T07:38:00.000Z" itemprop="datePublished" class="page-time">
  2018年01月16日
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/gameprogramming/">游戏编程</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/gameprogramming/wow/">魔兽世界</a></li></ul></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#相关资源链接："><span class="post-toc-number">1.</span> <span class="post-toc-text">相关资源链接：</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#宏与脚本"><span class="post-toc-number">2.</span> <span class="post-toc-text">宏与脚本</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是宏"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">什么是宏</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是脚本"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">什么是脚本</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#宏与脚本-1"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">宏与脚本</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#宏和脚本如何使用"><span class="post-toc-number">3.</span> <span class="post-toc-text">宏和脚本如何使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建宏"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">创建宏</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Lua脚本编码和一些脚本"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">Lua脚本编码和一些脚本</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#法术、技能和Buff"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">法术、技能和Buff</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#多使用缩写，优化可读性"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">多使用缩写，优化可读性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#我们不能通过宏做到什么"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">我们不能通过宏做到什么</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#不触发共cd的技能连续宏示例"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">不触发共cd的技能连续宏示例</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#物品的使用"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">物品的使用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SpellStopCasting"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">SpellStopCasting()</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-wow-macro-and-script"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">魔兽世界中的宏与脚本</h1>
        <div class="post-meta">
            <time class="post-time" title="2018年01月16日 15:38:00" datetime="2018-01-16T07:38:00.000Z"  itemprop="datePublished">2018年01月16日</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/gameprogramming/">游戏编程</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/gameprogramming/wow/">魔兽世界</a></li></ul></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="相关资源链接："><a href="#相关资源链接：" class="headerlink" title="相关资源链接："></a>相关资源链接：</h2><blockquote>
<p>魔兽世界WIKI <a href="http://www.wowwiki.com/" target="_blank" rel="noopener">http://www.wowwiki.com/</a>\<br>魔兽世界宏脚本 <a href="http://wowwiki.wikia.com/wiki/MACRO_script" target="_blank" rel="noopener">http://wowwiki.wikia.com/wiki/MACRO_script</a>\<br>一些宏 <a href="http://wowwiki.wikia.com/wiki/Most_used_macros" target="_blank" rel="noopener">http://wowwiki.wikia.com/wiki/Most_used_macros</a>\</p>
<h2 id="宏与脚本"><a href="#宏与脚本" class="headerlink" title="宏与脚本"></a>宏与脚本</h2><h3 id="什么是宏"><a href="#什么是宏" class="headerlink" title="什么是宏"></a>什么是宏</h3><p>宏本来是一个编程术语，暴雪在 <code>WOW</code> 中定义的宏，是一系列命令组合在一起以完成某些特定的操作，也可叫做子程序，并且提供了强大的 <code>Lua</code> 编辑器,允许用户和玩家自己编写宏来丰富游戏体验。</p>
</blockquote>
<p><code>WOW</code> 中的宏可以由任意数量的 <code>/&lt;命令&gt;</code> 或纯文本组成，但最多255个字符。你可以将其直接写在聊天对话框中。如果要获得更高级的宏应用，请访问文章开头的链接，里面有权威详细的指导和说明。</p>
<h3 id="什么是脚本"><a href="#什么是脚本" class="headerlink" title="什么是脚本"></a>什么是脚本</h3><p>不仅仅是在 <code>WOW</code> 中，脚本(Script)这个词一般指较为短小的用一种被称为脚本语言编写的程序。编写脚本的目的是用它来控制另一个程序。</p>
<p>魔兽世界内嵌了一个强大的(Powerful)脚本语言，叫 <code>Lua</code>。这东西的意义就在于 <code>WOW</code> 可以理解并执行那些用 <code>Lua</code> 语言编写的小程序。不过脚本通常来说都不能单独使用，比如你不能只是输入一行脚本就去执行(尽管这也是可能的)，而是在 <code>WOW</code> 中有几个地方让你选择性地将脚本作为其他什么东西的一部分。</p>
<blockquote>
<p>注：上下文中所述的脚本均为魔兽世界所支持的 <code>Lua</code> 脚本，也是游戏中普遍使用的脚本。</p>
<h3 id="宏与脚本-1"><a href="#宏与脚本-1" class="headerlink" title="宏与脚本"></a>宏与脚本</h3><p>在宏定义中我们提到，宏是一个子程序，也就是或它包含很多的指令，而脚本刚好可以作为这些指令的存在，因此，你可以这样理解：宏包含脚本，脚本（这里指的是 <code>Lua</code> 脚本）是合法的宏语句。</p>
</blockquote>
<p>你可以将脚本作为宏的一部分，在你的宏里面放置一些 <code>/script</code> 语句。</p>
<p>宏可以执行很多操作，基本的指令有：</p>
<ul>
<li>表情</li>
<li>动作</li>
<li>技能</li>
<li>聊天喊话</li>
</ul>
<p>高级指令，即使用 <code>/script</code> 语句执行 <code>Lua</code> 脚本，可以实现更多高端的命令。常见的有寻路、飞天、钓鱼、自动打怪、自动采集等等。</p>
<blockquote>
<p>那脚本能干什么呢？\<br><a href="http://www.wowwiki.com/" target="_blank" rel="noopener">http://www.wowwiki.com/</a> 有许多关于Lua脚本的资源，不过最重要的一点就是脚本能比 <code>/命令</code> 实现更多的游戏动作，这就要通过一种叫 <code>WOW 开放的API(Application Programming Interface)</code>，还是那网站有许多关于API的东西。</p>
<h2 id="宏和脚本如何使用"><a href="#宏和脚本如何使用" class="headerlink" title="宏和脚本如何使用"></a>宏和脚本如何使用</h2></blockquote>
<h3 id="创建宏"><a href="#创建宏" class="headerlink" title="创建宏"></a>创建宏</h3><p>在聊天框中输入 <code>/macro</code> 或 <code>/m</code>，调出宏面板，然后单击“新建”，给它一个名字和图标，然后输入你要制作的宏的命令。</p>
<p>除去基础指令外，如果要写像 <code>如果……那么……</code> 的指令，则用到 <code>Lua</code> 脚本，需要使用 <code>/script</code> 开头的语句调用 <code>Lua</code> 脚本编译器，以 <code>/script</code> 开头的语句后面的内容将都会作为 <code>Lua</code> 脚本来运行。把所有宏的内容都写在一行里是非常重要的，而且要保证在255个字符内。</p>
<blockquote>
<p>备注：宏命令只支持255个字符</p>
</blockquote>
<p>下面是一个示例的条件宏,你可以用 <code>if...then...end</code> 的代码块来完成你的宏，完成之后看起来应该像这个样子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/script if UnitName(&quot;target&quot;) == &quot;fred&quot; then CastSpellByName(&quot;治疗之触(等级 1)&quot;) end</span><br></pre></td></tr></table></figure></p>
<p>注意结尾要写上end，这对Lua语言很重要。</p>
<blockquote>
<p>对上面代码的注释：</p>
<ul>
<li><p><code>target</code> 是目标的意思，是 <code>WOW</code> 中自定义的变量，表示当前目标，不是 <code>Lua</code> 中的内置量。也有一些常见的 <code>WOW</code> 中的变量，如：</p>
<ul>
<li><code>player</code> 表示你自己，不管你叫什么名字</li>
<li><code>party1</code> 到 <code>party4</code> 分别代表你的队友</li>
<li><code>pet</code> 代表宠物</li>
</ul>
</li>
<li><p>关于上一条中所述的 <code>WOW</code> 中的变量，严格意义是字面量，即调用时候需要使用引号 <code>UnitName(player)</code> 这是一个错误的写法，如果想使用 <code>UnitName(player)</code> 这种写法，需要提前定义变量 <code>player=&quot;player&quot;</code></p>
</li>
</ul>
</blockquote>
<p>另外，宏命令（<code>/script</code> 也是一个宏命令）不能写在脚本里面，如：/cast也是一个宏命令和 <code>/script</code> 同层次，不属于 <code>Lua</code> 语句，不能作为 <code>/script</code> 的子语句<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#没有这种写法</span><br><span class="line">/script if UnitName(&quot;target&quot;) == &quot;fred&quot; then /cast 治疗之触(等级 1) end</span><br></pre></td></tr></table></figure></p>
<h3 id="Lua脚本编码和一些脚本"><a href="#Lua脚本编码和一些脚本" class="headerlink" title="Lua脚本编码和一些脚本"></a>Lua脚本编码和一些脚本</h3><blockquote>
<p>在用Lua脚本编码时，用不用给每条语句后面都加个分号？</p>
</blockquote>
<p><code>Lua</code> 不需要这么做，但如果你喜欢的话也可以。那样的确便于阅读而且是个好的习惯。<code>Lua</code> 对标记还不够严格，可以理解没有分号的语句。甚至像下面这么糟糕的语句也是合法的:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/script a =5 b =6 Message(a..b)c= a +b</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>我怎样在聊天框输出文本？</p>
</blockquote>
<p>用 <code>DEFAULT_CHAT_FRAME:AddMessage(msg,r,g,b,a)</code>，其中msg是文本，r,g,b是红绿蓝(0,1)，a表示alpha透明度(0表示完全透明，1表示完全不透明)，如果不写将被视为完全不透明。<br>如果你用别名来表示的话，这就简单多了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cprint = DEFAULT_CHAT_FRAME:AddMessage</span><br></pre></td></tr></table></figure></p>
<p>然后你就可以反复用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cprint(&quot;foo&quot;,1,0,0)</span><br></pre></td></tr></table></figure></p>
<p>而不必每次都输入那么一堆字符了。</p>
<p>补充: 如果你用Comos的话，也可以这样做:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/in 5 /say Hello,</span><br><span class="line">/say Fred!</span><br></pre></td></tr></table></figure></p>
<p>在5秒之后说”你好！”，但你会马上说Fred！。/in并不是宏暂停命令，它只不过允许你实现简单命令的等待和排队。</p>
<p>但是，你不能用/in来释放法术、技能或运行其他宏，这因为硬件事件的限制，所以它的用途非常有限。你可以用它来说话、使用物品，仅此而已。这也是我不把它放在一开始就指出的原因，因为99%的时间里人们想要个暂停，这样的话他们就可以在一个宏里释放另一个法术或切换物品栏的物品然后使用技能，任何这些在/in里面都是无法实现的。</p>
<blockquote>
<p>为什么我的宏/脚本用不起来？我基本肯定我的代码没错了。</p>
<ul>
<li><strong>对于宏:</strong> 两次甚至三次地检查你的语法。记住Lua是区分大小写的！也检查三遍法术技能名称，好在汉字名称一个是一个，不像英文错个字母就够郁闷半天。</li>
<li><strong>对于插件:</strong> 遵循上面对宏的建议。记住Lua和XML都是区分大小写的！<code>&lt;/OnLoad&gt;</code> 和 <code>&lt;/onload&gt;</code> 不一样。如果你的插件在[插件]列表里可选，但在游戏里加载不上，检查你的XML，可能什么地方弄错了。</li>
<li>如果上面办法都试过还是用不起来，到网上论坛发贴寻求帮助。<br>我怎么注册”/“命令？</li>
</ul>
</blockquote>
<p>这要牵涉到魔兽世界插件开发，本文暂不介绍，详细参见<a href=""></a></p>
<h3 id="法术、技能和Buff"><a href="#法术、技能和Buff" class="headerlink" title="法术、技能和Buff"></a>法术、技能和Buff</h3><blockquote>
<p>要知道一个法术技能释放信息的最好办法是什么？</p>
</blockquote>
<p>先打开宏编辑面板，然后打开技能书。将鼠标指针定位在宏编辑框内，然后按住Shift键再用鼠标左键去点你要的技能，游戏会自动为你提取并添加准确的语句，你还可以修改和复制。</p>
<blockquote>
<p>我能做一个条件宏来根据我的Buff来判断要做什么吗？<br>判断buff<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">local qg; for i=1,16,1 do b=UnitBuff(&quot;player&quot;,i); if b and string.find(b,&quot;SliceDice&quot;) then qg=1 break; end; end</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>释放技能<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/script if [检查切割的buff] then CastSpellByName(&quot;邪恶攻击&quot;) else CastSpellByName(&quot;切割&quot;) end</span><br></pre></td></tr></table></figure></p>
<p>合并后：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/script local qg; for i=1,16,1 do b=UnitBuff(&quot;player&quot;,i); if b and string.find(b,&quot;SliceDice&quot;) then qg=1 break; end; end; if qg==1 then CastSpellByName(&quot;邪恶攻击&quot;) else CastSpellByName(&quot;切割&quot;) end</span><br></pre></td></tr></table></figure></p>
<p>有些插件可以把一些很麻烦的命令简化，例如isBuffActive之类的<br>判断buff，通过这个插件只需要<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/script if isBuffActive(&quot;SliceDice&quot;) then yyyy end</span><br></pre></td></tr></table></figure></p>
<p>当然，我们也可以使用 <code>fuction</code> 命令封装我们的代码，然后就可以复用，达到同样的效果</p>
<blockquote>
<p>我的牧师当初有个宏提醒别人我在复活谁</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/s 我正在复活%t</span><br><span class="line">/script CastSpellByName(&quot;复活术&quot;)</span><br></pre></td></tr></table></figure>
<p>但是有个问题，有时候我因为在战斗中点到制造噪音，怎么办呢？我就改为了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/script if (not UnitAffectingCombat(&quot;player&quot;)) then CastSpellByName(&quot;复活术&quot;); SendChatMessage(&quot;我正在复活&quot;..UnitName(&quot;target&quot;)) end</span><br></pre></td></tr></table></figure></p>
<p>但是有时候仍然会制造噪音，只要我的目标不是我复活的人那么就会乱说话，那么我要当前目标是死人<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/script if (not UnitAffectingCombat(&quot;player&quot;)) then if (UnitName(&quot;target&quot;)~=nil) and (UnitHealth(&quot;target&quot;)==0)) then CastSpellByName(&quot;复活术&quot;); SendChatMessage(&quot;我正在复活&quot;..UnitName(&quot;target&quot;) end; end</span><br></pre></td></tr></table></figure></p>
<p>好吧，又有问题就是，如果我不选目标那么我不能放复活术了。继续<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/script if (not UnitAffectingCombat(&quot;player&quot;)) then CastSpellByName(&quot;复活术&quot;); if ((UnitName(&quot;target&quot;)~=nil) and (UnitHealth(&quot;target&quot;))) then SendChatMessage(&quot;我正在复活&quot;..UnitName(&quot;target&quot;) end; end</span><br></pre></td></tr></table></figure></p>
<h3 id="多使用缩写，优化可读性"><a href="#多使用缩写，优化可读性" class="headerlink" title="多使用缩写，优化可读性"></a>多使用缩写，优化可读性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UCI=UseContainerItem; CSB=CastSpellByName; SSC=SpellStopCasting()</span><br></pre></td></tr></table></figure>
<p>这样的好处是少些很多代码，又不至于降低代码的可读性</p>
<h3 id="我们不能通过宏做到什么"><a href="#我们不能通过宏做到什么" class="headerlink" title="我们不能通过宏做到什么"></a>我们不能通过宏做到什么</h3><ul>
<li>在…的时候自动释放…</li>
<li>一个自动拾取尸体或剥皮的宏</li>
<li>做个宏自动拿战场旗子</li>
<li>获得你和敌对目标的准确距离的技能已经被移除。现在你最多只能获得一个给予你当前技能是否可用的范围(比如30到36码)。</li>
<li>你无法在一个宏里面一次释放多个需要共cd的技能，当然不触发共cd是可行的</li>
</ul>
<h3 id="不触发共cd的技能连续宏示例"><a href="#不触发共cd的技能连续宏示例" class="headerlink" title="不触发共cd的技能连续宏示例"></a>不触发共cd的技能连续宏示例</h3><p>错误的写法如下，原因是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/施放 自然迅捷</span><br><span class="line">/施放 治疗波</span><br></pre></td></tr></table></figure></p>
<p>应该这样写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/施放 自然迅捷</span><br><span class="line">/script SpellStopCasting();</span><br><span class="line">/施放 治疗波</span><br></pre></td></tr></table></figure></p>
<p>下面是盗贼的急救宏：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/施放 凿击</span><br><span class="line">/script SpellStopCasting()</span><br><span class="line">/script UseContainerItem(0,1) --绷带的</span><br></pre></td></tr></table></figure></p>
<p>当然，不是所有的连续施法都需要使用 <code>SpellStopCasting()</code>，前一个不触发共cd的技能，如果作用到下一次使用，会在开始使用前取消一切动作就不用，比如：<code>英勇打击</code>、<code>猛禽一击</code><br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/施放 猛禽一击</span><br><span class="line">/施放 摔绊</span><br></pre></td></tr></table></figure></p>
<p>这个宏可以立即发摔绊然后接猛禽一击(如果武器时间正好的话)。战士也可以把同样的方法用到英勇和断筋中，尽管这样会消耗大量怒气。</p>
<h3 id="物品的使用"><a href="#物品的使用" class="headerlink" title="物品的使用"></a>物品的使用</h3><p>多数物品不会有公共冷却，那意思就是不会像法术那样触发公共冷却，也就可以连续的使用了。德鲁伊可以做一个紧急自救，即回春+治疗药水。我喜欢一直用闪电盾，所以我把它连在召唤坐骑之前。一些饰品也可以紧随法术之后使用。</p>
<h3 id="SpellStopCasting"><a href="#SpellStopCasting" class="headerlink" title="SpellStopCasting()"></a>SpellStopCasting()</h3><p><code>SpellStopCasting()</code> 不只是可以停止不触发共cd技能的动作，也会取消正在施法中的技能或者动作</p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-01-18T06:03:36.801Z" itemprop="dateUpdated">2018年01月18日 14:03:36</time>
</span><br>


        
        本文地址：<a href="/2018/01/16/wow-macro-and-script/" target="_blank" rel="external">http://denisding.github.io/2018/01/16/wow-macro-and-script/</a><br/>上述内容只表示作者个人观点，如有争议请联系我：<a href="http://denisding.github.io/about" rel="external">http://denisding.github.io/about</a>
        
    </div>
    <footer>
        <a href="http://denisding.github.io">
            <img src="/img/avatar.jpg" alt="丁竹">
            丁竹
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Lua/">Lua</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/外挂/">外挂</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/外挂开发/">外挂开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/宏/">宏</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/游戏/">游戏</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/脚本/">脚本</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/魔兽世界/">魔兽世界</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://denisding.github.io/2018/01/16/wow-macro-and-script/&title=《魔兽世界中的宏与脚本》 — 熊战天下&pic=http://denisding.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://denisding.github.io/2018/01/16/wow-macro-and-script/&title=《魔兽世界中的宏与脚本》 — 熊战天下&source=沧海长河，当怒吼八方，熊战天下" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://denisding.github.io/2018/01/16/wow-macro-and-script/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《魔兽世界中的宏与脚本》 — 熊战天下&url=http://denisding.github.io/2018/01/16/wow-macro-and-script/&via=http://denisding.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://denisding.github.io/2018/01/16/wow-macro-and-script/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/01/17/2018-01-17-wow-plugin/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> 上一篇</div>
        <h4 class="title">魔兽世界中的插件</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/01/15/git-change-branch/" id="post-next" class="post-nav-link">
        <div class="tips">下一篇 <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Git 主分支和子分支转换</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "On4dGg1AthEfkt0IkKRyBeNe-gzGzoHsz",
            appKey: "DLdKkLKay7N4kTL0GnezBROt",
            avatar: "mm",
            placeholder: "说出你心底的秘密吧……",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>丁竹 &copy; 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://denisding.github.io/2018/01/16/wow-macro-and-script/&title=《魔兽世界中的宏与脚本》 — 熊战天下&pic=http://denisding.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://denisding.github.io/2018/01/16/wow-macro-and-script/&title=《魔兽世界中的宏与脚本》 — 熊战天下&source=沧海长河，当怒吼八方，熊战天下" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://denisding.github.io/2018/01/16/wow-macro-and-script/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《魔兽世界中的宏与脚本》 — 熊战天下&url=http://denisding.github.io/2018/01/16/wow-macro-and-script/&via=http://denisding.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://denisding.github.io/2018/01/16/wow-macro-and-script/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=http://denisding.github.io/2018/01/16/wow-macro-and-script/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


lazyScripts.push('//s95.cnzz.com/z_stat.php?id=1272238435&web_id=1272238435')

</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼，快点回来！';
            clearTimeout(titleTime);
        } else {
            document.title = '我等的花儿也谢了！';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
